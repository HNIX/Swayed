<%= fields_for "campaign[campaign_distributions_attributes][#{@index}][mapped_fields_attributes][#{ Time.now.to_i }]", mapped_field do |mapped_field| %>
    <tr id="mapped_field_<%= Time.now.to_i %>" data-fields-target="field" data-controller="fields toggle-field">
        <%= mapped_field.hidden_field :id %>     <!-- Odd row -->
       
         <td class="whitespace-nowrap pr-3 py-2 text-sm text-gray-500" data-controller="field-name">
            <%= mapped_field.text_field :name, 
                data: { action: "keyup->field-name#validate", field_name_target: "input" },
                class: "block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6 [&_*]:text-black", placeholder: "field_name" %>
                <div data-field-name-target="error" class="hidden text-red-500 mt-2 w-36"></div>
        </td>
        <td class="whitespace-nowrap px-3 py-2 text-sm text-gray-500">
            <%= mapped_field.select :campaign_field_id,  
                    options_from_collection_for_select(@campaign.campaign_fields, 'id', 'name') + options_for_select([['Custom Value', -1]]), 
                    { prompt: "Select field" }, {data: { action: "change->toggle-field#valueChanged", target: "toggle-field.select" }, class: "block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6 [&_*]:text-black" } %>
        </td>

        <!-- Static Value Input (Initially Hidden) -->
        <td class="whitespace-nowrap px-3 py-2 text-sm text-gray-500" data-toggle-field-target="staticValue">
            <%= mapped_field.text_field :static_value, placeholder: "Enter static value", class: "block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6 [&_*]:text-black" %>
        </div>

        <td class="whitespace-nowrap px-3 py-2 text-sm text-gray-500">
            <button class="rounded-full border border-gray-400 p-2 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600" type="button" data-action="click->fields#removeField" data-field-id="<%= Time.now.to_i %>">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-2 w-2 text-gray-200">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12h-15" />
                </svg>
            </button>
        </td>
    </tr>
<% end %>
