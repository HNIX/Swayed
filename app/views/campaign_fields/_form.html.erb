<%= form_with(model: [@campaign, @field]) do |form| %>
  <div class="space-y-6 divide-y divide-white/5">
    <%= render "shared/error_messages", resource: form.object %>

    <div class="grid max-w-7xl grid-cols-1 gap-x-8 gap-y-10 px-4 py-10 sm:px-6 md:grid-cols-3 lg:px-8">
      <div>
        <h2 class="text-base font-semibold leading-7 text-white">Field Details</h2>
        <p class="mt-1 text-sm leading-6 text-gray-400">Basic details about the source, including its name and current status.</p>
      </div>
      

      <div class="grid max-w-2xl grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6 md:col-span-2">
        <div class="sm:col-span-5">
          <label for="website" class="block text-sm font-medium leading-6 text-white">Field Name</label>
          <div class="mt-2">
              <%= form.text_field :name, autofocus: true, class: "block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6" %>
          </div>
        </div>

        <div class="sm:col-span-2">
          <label for="website" class="block text-sm font-medium leading-6 text-white">Data Type</label>
          <div class="mt-2">
                <%= form.select(:data_type, CampaignField.data_types.keys.map { |type| [type.titlecase, type] }, {}, class: "block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6 [&_*]:text-black") %>
          </div>
        </div>

        <div class="sm:col-span-5">
        <fieldset>
          <legend class="text-sm font-semibold leading-6 text-white">Required</legend>
          <div class="mt-6 space-y-6">
            <div class="relative flex gap-x-3">
              <div class="flex h-6 items-center">
                <%= form.check_box(:ping_required, class: "h-4 w-4 rounded border-white/10 bg-white/5 text-indigo-600 focus:ring-indigo-600 focus:ring-offset-gray-900") %>
              </div>
              <div class="text-sm leading-6">
                <label for="comments" class="font-medium text-white">Ping</label>
                <p class="text-gray-400">Do not require personally identifiable information (PII).</p>
              </div>
            </div>
            <div class="relative flex gap-x-3">
              <div class="flex h-6 items-center">
                <%= form.check_box(:post_required, class: "h-4 w-4 rounded border-white/10 bg-white/5 text-indigo-600 focus:ring-indigo-600 focus:ring-offset-gray-900") %>
              </div>
              <div class="text-sm leading-6">
                <label for="candidates" class="font-medium text-white">Post</label>
                <p class="text-gray-400">All fields required on the ping should also be required on the post.</p>
              </div>
            </div>
          </div>
        </fieldset>
        </div>

        <div class="sm:col-span-5">
        <fieldset>
          <legend class="text-sm font-semibold leading-6 text-white">Personally Identifiable Information</legend>
          <div class="mt-6 space-y-6">
            <div class="relative flex gap-x-3">
              <div class="flex h-6 items-center">
                <%= form.check_box(:is_pii, class: "h-4 w-4 rounded border-white/10 bg-white/5 text-indigo-600 focus:ring-indigo-600 focus:ring-offset-gray-900") %>
              </div>
              <div class="text-sm leading-6">
                <label for="comments" class="font-medium text-white">Field Contains PII</label>
                <p class="text-gray-400">We will treat PII differntly in the application.</p>
              </div>
            </div>
          </div>
        </fieldset>
        </div>

        <div class="sm:col-span-5">
        <fieldset>
          <legend class="text-sm font-semibold leading-6 text-white">Rules</legend>
          <div class="mt-6 space-y-6">
            <div class="relative flex gap-x-3">
              <%= form.fields_for :rule_set do |rules_rule_set_form| %>
                <%= rules_rule_set_form.fields_for :rules do |rules_rule_form| %>
                  <%= rules_rule_form.select(:lhs_parameter_key, Rules.constants.merge(rules_rule_form.object.rule_set.try(:attributes) || {}).map {|key, const| [const.name, key, {:'data-type' => const.try(:type) || 'string'}] }, {}, class: "block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6 [&_*]:text-black") %>
                  <%= rules_rule_form.select(:evaluator_key, Rules.evaluators.map { |key, evaluator| [evaluator.name, key, data: { 'requires-rhs' => evaluator.requires_rhs? }] }.sort_by { |name, key| name }, {}, class: "block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6 [&_*]:text-black") %>
                  <%= rules_rule_form.text_field :rhs_parameter_raw, label: 'Enter a value', class: "rules_rhs_parameter" %>
                  <%= rules_rule_form.select(:rhs_parameter_key, Rules.constants.merge(rules_rule_form.object.rule_set.try(:attributes) || {}).map {|key, const| [const.name, key, {:'data-type' => const.try(:type) || 'string'}] }, {}, class: "block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6 [&_*]:text-black")  %>
                <% end %>
                <%= rules_rule_set_form.select(:evaluation_logic, [['All Rules', 'all'], ['Any Rules', 'any']]) %>
              <% end %>
            </div>
          </div>
        </fieldset>
      </div>
      
      </div>
      <div class="md:col-span-3 mt-6 flex items-center justify-end gap-x-6">
        <% if @field.persisted? %>
          <%= link_to "Cancel", campaign_campaign_field_path(@campaign, @field), class: "text-sm font-semibold leading-6 text-white" %>
        <% else %>
          <%= link_to "Cancel", campaign_campaign_fields_path(@campaign), class: "text-sm font-semibold leading-6 text-white" %>
        <% end %>
        <%= form.submit 'Add Field', class: 'rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600' %>
      </div>

    </div>
  </div>

  
<% end %>
